<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue编译过程 | 源于生活</title>
    <meta name="description" content="write something">
    <meta name="generator" content="VuePress 1.3.0">
    
    
    <link rel="preload" href="/assets/css/0.styles.2e629a8b.css" as="style"><link rel="preload" href="/assets/js/app.40f46a03.js" as="script"><link rel="preload" href="/assets/js/2.b61884c0.js" as="script"><link rel="preload" href="/assets/js/30.6315de72.js" as="script"><link rel="prefetch" href="/assets/js/10.cef75600.js"><link rel="prefetch" href="/assets/js/11.d20f5ffc.js"><link rel="prefetch" href="/assets/js/12.e3a2b48e.js"><link rel="prefetch" href="/assets/js/13.0b39c694.js"><link rel="prefetch" href="/assets/js/14.85568d35.js"><link rel="prefetch" href="/assets/js/15.4334a8c6.js"><link rel="prefetch" href="/assets/js/16.7385e1c4.js"><link rel="prefetch" href="/assets/js/17.36a6a396.js"><link rel="prefetch" href="/assets/js/18.6334fa75.js"><link rel="prefetch" href="/assets/js/19.83d2cde1.js"><link rel="prefetch" href="/assets/js/20.abe5e400.js"><link rel="prefetch" href="/assets/js/21.166fa48f.js"><link rel="prefetch" href="/assets/js/22.4c524dca.js"><link rel="prefetch" href="/assets/js/23.f13aa316.js"><link rel="prefetch" href="/assets/js/24.d71d4d4d.js"><link rel="prefetch" href="/assets/js/25.ee931a3e.js"><link rel="prefetch" href="/assets/js/26.b80c1347.js"><link rel="prefetch" href="/assets/js/27.4834fc45.js"><link rel="prefetch" href="/assets/js/28.5dd96a08.js"><link rel="prefetch" href="/assets/js/29.f6e8d795.js"><link rel="prefetch" href="/assets/js/3.768e72ae.js"><link rel="prefetch" href="/assets/js/31.a91a2848.js"><link rel="prefetch" href="/assets/js/32.c5b85177.js"><link rel="prefetch" href="/assets/js/33.9898a9ea.js"><link rel="prefetch" href="/assets/js/34.8637e11c.js"><link rel="prefetch" href="/assets/js/35.36f70523.js"><link rel="prefetch" href="/assets/js/36.6a882fec.js"><link rel="prefetch" href="/assets/js/37.03a8e5e0.js"><link rel="prefetch" href="/assets/js/38.60b9b3ca.js"><link rel="prefetch" href="/assets/js/39.b117c14b.js"><link rel="prefetch" href="/assets/js/4.5960558f.js"><link rel="prefetch" href="/assets/js/40.ac6bb60c.js"><link rel="prefetch" href="/assets/js/41.0d8378c1.js"><link rel="prefetch" href="/assets/js/5.d96a9da9.js"><link rel="prefetch" href="/assets/js/6.74792406.js"><link rel="prefetch" href="/assets/js/7.1a988641.js"><link rel="prefetch" href="/assets/js/8.ce6a39d7.js"><link rel="prefetch" href="/assets/js/9.73dc9b99.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2e629a8b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">源于生活</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>关于code</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Article/code/实现小型打包工具.html" class="sidebar-link">实现小型打包工具</a></li><li><a href="/Article/code/NextTick 原理分析.html" class="sidebar-link">NextTick 原理分析</a></li><li><a href="/Article/code/Service Worker.html" class="sidebar-link">Service Worker</a></li><li><a href="/Article/code/Vue 和 React 之间的区别.html" class="sidebar-link">Vue 和 React 之间的区别</a></li><li><a href="/Article/code/vue的mvvm原理.html" class="sidebar-link">vue的mvvm原理</a></li><li><a href="/Article/code/前端路由原理.html" class="sidebar-link">前端路由原理</a></li><li><a href="/Article/code/vue编译过程.html" class="active sidebar-link">vue编译过程</a></li><li><a href="/Article/code/浏览器的缓存策略.html" class="sidebar-link">浏览器的缓存策略</a></li><li><a href="/Article/code/浏览器缓存位置.html" class="sidebar-link">浏览器缓存位置</a></li><li><a href="/Article/code/多语言.html" class="sidebar-link">前端多语言方案</a></li><li><a href="/Article/code/地图学习.html" class="sidebar-link">地图学习笔记</a></li><li><a href="/Article/code/数据双向绑定的分析和简单实现.html" class="sidebar-link">数据双向绑定的分析和简单实现</a></li><li><a href="/Article/code/多语言.html" class="sidebar-link">前端多语言方案</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue组件</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue编译过程"><a href="#vue编译过程" class="header-anchor">#</a> vue编译过程</h1> <p>Vue 都是使用模板的方式来开发的。
首先直接把模板丢到浏览器中肯定是不能运行的，模板只是为了方便开发者进行开发。Vue 会通过编译器将模板通过几个阶段最终编译为 render 函数，然后通过执行 render 函数生成 Virtual DOM 最终映射为真实 DOM。
这个过程其中又分为三个阶段，分别为：</p> <ol><li>将模板解析为 AST</li> <li>优化 AST</li> <li>将 AST 转换为 render 函数</li></ol> <p>在第一个阶段中，最主要的事情还是通过各种各样的正则表达式去匹配模板中的内容，然后将内容提取出来做各种逻辑操作，接下来会生成一个最基本的 AST 对象</p> <div class="language- extra-class"><pre><code>{
    // 类型
    type: 1,
    // 标签
    tag,
    // 属性列表
    attrsList: attrs,
    // 属性映射
    attrsMap: makeAttrsMap(attrs),
    // 父节点
    parent,
    // 子节点
    children: []
}
</code></pre></div><p>然后会根据这个最基本的 AST 对象中的属性，进一步扩展 AST。</p> <p>当然在这一阶段中，还会进行其他的一些判断逻辑。比如说对比前后开闭标签是否一致，判断根组件是否只存在一个，判断是否符合 HTML5规范等等问题。
优化 AST 的阶段。对节点进行了静态内容提取，也就是将永远不会变动的节点提取了出来，实现复用 Virtual DOM，跳过对比算法的功能。
最后一个阶段就是通过 AST 生成 render函数了。其实这一阶段虽然分支有很多，但是最主要的目的就是遍历整个 AST，根据不同的条件生成不同的代码罢了。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Article/code/前端路由原理.html" class="prev">
        前端路由原理
      </a></span> <span class="next"><a href="/Article/code/浏览器的缓存策略.html">
        浏览器的缓存策略
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><div class="cat-container" data-v-a13867c0><canvas id="vuepress-cat" width="280" height="250" class="live2d" data-v-a13867c0></canvas></div></div></div>
    <script src="/assets/js/app.40f46a03.js" defer></script><script src="/assets/js/2.b61884c0.js" defer></script><script src="/assets/js/30.6315de72.js" defer></script>
  </body>
</html>
